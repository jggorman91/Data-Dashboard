<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Behavior Data Collection Dashboard (K-6)</title>
    <style>
        /* General Resets & Base Styles */
        :root {
            --primary-color: #007bff;
            --primary-color-darker: #0056b3;
            --secondary-color: #6c757d;
            --secondary-color-darker: #545b62;
            --danger-color: #dc3545;
            --danger-color-darker: #b02a37;

            --header-bg: #343a40;
            --header-text: #f8f9fa;
            --body-bg: #f8f9fa;
            --card-bg: #ffffff;
            --text-color: #333;
            --text-soft-color: #495057;
            --border-color: #ced4da;
            --light-gray-bg: #e9ecef;
            --interactive-highlight: #007bff; /* For tutorial steps, etc. */

            --font-sans-serif: Arial, Helvetica, sans-serif;
            --font-monospace: Consolas, 'Courier New', monospace;

            --spacing-unit: 0.5rem; /* 8px if root font-size is 16px */
            --border-radius-sm: 3px;
            --border-radius-md: 6px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: var(--font-sans-serif);
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--body-bg);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Utility Classes */
        .mb-1 { margin-bottom: var(--spacing-unit); }
        .mb-2 { margin-bottom: calc(var(--spacing-unit) * 2); }
        .mt-1 { margin-top: var(--spacing-unit); }
        .mt-2 { margin-top: calc(var(--spacing-unit) * 2); }

        /* Header & Navigation */
        header {
            background-color: var(--header-bg);
            color: var(--header-text);
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 4); /* 1rem 2rem */
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        header h1 {
            font-size: 1.7rem;
            font-weight: 600;
            white-space: nowrap;
        }

        nav ul {
            list-style-type: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        nav ul li a {
            color: var(--header-text);
            text-decoration: none;
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 1.6); /* 0.5rem 0.8rem */
            margin: calc(var(--spacing-unit) * 0.4); /* 0.2rem */
            border-radius: var(--border-radius-sm);
            transition: background-color 0.3s ease, color 0.3s ease;
            font-size: 0.9rem;
        }

        nav ul li a:hover,
        nav ul li a.active-nav {
            background-color: var(--primary-color);
            color: white;
        }
        nav ul li a:focus { /* Explicit focus for nav links */
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
            background-color: var(--primary-color-darker);
        }


        /* Main Content Area */
        main {
            flex-grow: 1;
            padding: calc(var(--spacing-unit) * 3); /* 1.5rem */
            max-width: 1100px;
            margin: 0 auto;
            width: 100%;
        }

        .dashboard-section {
            /* display: none; /* Controlled by aria-hidden and active-section for animation */
            background-color: var(--card-bg);
            padding: calc(var(--spacing-unit) * 3);
            border-radius: var(--border-radius-md);
            box-shadow: 0 2px 5px rgba(0,0,0,0.08);
            margin-bottom: calc(var(--spacing-unit) * 3);
        }
        .dashboard-section[aria-hidden="true"] {
            display: none;
        }
        .dashboard-section[aria-hidden="false"] {
            display: block; /* Or your preferred display type */
            animation: fadeIn 0.4s ease-in-out; /* Apply animation only when becoming visible */
        }
        /* .dashboard-section.active-section is used for the animation trigger if needed,
           but aria-hidden is the primary visibility control for A11y and CSS */


        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dashboard-section h2 {
            font-size: 1.6rem;
            color: var(--primary-color-darker);
            margin-bottom: calc(var(--spacing-unit) * 2.4); /* 1.2rem */
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: calc(var(--spacing-unit) * 0.8); /* 0.4rem */
        }
        
        .dashboard-section h3 {
            font-size: 1.3rem;
            color: var(--header-bg); /* Darker like header */
            margin-top: calc(var(--spacing-unit) * 2.4);
            margin-bottom: calc(var(--spacing-unit) * 1.2); /* 0.6rem */
        }

        .dashboard-section p, .dashboard-section ul, .dashboard-section ol {
            margin-bottom: calc(var(--spacing-unit) * 1.6); /* 0.8rem */
            color: var(--text-soft-color);
            font-size: 0.95rem;
        }
        
        .dashboard-section ul, .dashboard-section ol {
            padding-left: calc(var(--spacing-unit) * 2.4); /* 1.2rem */
        }
        .dashboard-section li {
            margin-bottom: calc(var(--spacing-unit) * 0.6); /* 0.3rem */
        }

        /* Homepage Specific */
        .method-overview, .best-practice-item {
            margin-bottom: calc(var(--spacing-unit) * 2.4);
            padding: calc(var(--spacing-unit) * 2); /* 1rem */
            border-left: 3px solid var(--primary-color);
            background-color: #fdfdff; /* Very light blue tint */
            border-radius: 0 var(--border-radius-sm) var(--border-radius-sm) 0;
        }
        .method-overview h4, .best-practice-item h4 {
            font-size: 1.1rem;
            color: var(--primary-color-darker);
            margin-bottom: calc(var(--spacing-unit) * 0.6);
        }

        /* Resource Section & Interactive Tutorials */
        .tutorial-step {
            background-color: var(--light-gray-bg);
            padding: calc(var(--spacing-unit) * 1.6) calc(var(--spacing-unit) * 2); /* 0.8rem 1rem */
            margin-bottom: var(--spacing-unit);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: background-color 0.2s;
            font-weight: 500;
        }
        .tutorial-step:hover {
            background-color: #ced4da; /* Darker gray on hover */
        }
        .tutorial-step:focus {
            outline: 2px solid var(--interactive-highlight);
            outline-offset: 1px;
            background-color: #dde2e6;
        }

        .tutorial-content {
            display: none;
            padding: calc(var(--spacing-unit) * 1.6) 0 calc(var(--spacing-unit) * 1.6) calc(var(--spacing-unit) * 2);
            border-left: 2px solid var(--interactive-highlight);
            margin-top: var(--spacing-unit);
            font-size: 0.9rem;
            background-color: #fdfdff; /* Slightly off-white */
        }
        .tutorial-content.visible {
            display: block;
        }

        /* Generator Tool & Recommendation Tool Forms */
        .data-form fieldset {
            border: 1px solid var(--border-color);
            padding: calc(var(--spacing-unit) * 2);
            margin-bottom: calc(var(--spacing-unit) * 2);
            border-radius: var(--border-radius-sm);
            background-color: #fdfdff;
        }
        .data-form legend {
            font-weight: 600;
            color: var(--primary-color-darker);
            padding: 0 var(--spacing-unit);
            font-size: 1rem;
        }

        .data-form label {
            display: block;
            margin-bottom: calc(var(--spacing-unit) * 0.6);
            font-weight: 600;
            color: var(--text-soft-color);
            font-size: 0.9rem;
        }

        .data-form input[type="text"],  
        .data-form select,
        .data-form textarea { /* Added textarea */
            width: 100%;
            padding: calc(var(--spacing-unit) * 1.2); /* 0.6rem */
            margin-bottom: calc(var(--spacing-unit) * 1.6);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            font-size: 0.9rem;
            background-color: var(--card-bg);
        }
        .data-form input:focus, .data-form select:focus, .data-form textarea:focus {
             border-color: var(--primary-color);
             box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);
             outline: none;
        }


        .button, button {
            background-color: var(--primary-color);
            color: white;
            padding: calc(var(--spacing-unit) * 1.2) calc(var(--spacing-unit) * 2.4); /* 0.6rem 1.2rem */
            border: none;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: background-color 0.2s ease, box-shadow 0.2s ease;
            text-decoration: none;
            display: inline-block;
            margin-top: var(--spacing-unit);
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        .button:hover, button:hover {
            background-color: var(--primary-color-darker);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .button:focus, button:focus {
            background-color: var(--primary-color-darker);
            box-shadow: 0 0 0 0.2rem rgba(38,143,255,.5);
            outline: none;
        }


        .button.secondary { background-color: var(--secondary-color); }
        .button.secondary:hover, .button.secondary:focus { background-color: var(--secondary-color-darker); }
        .button.danger { background-color: var(--danger-color); }
        .button.danger:hover, .button.danger:focus { background-color: var(--danger-color-darker); }

        #generatedTemplateOutputContainer, #recommendationResultContainer {
            margin-top: calc(var(--spacing-unit) * 2.4);
            padding: calc(var(--spacing-unit) * 2.4);
            background-color: var(--light-gray-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-sm);
        }
        #generatedTemplateOutput {
            white-space: pre-wrap;
            font-family: var(--font-monospace);
            font-size: 0.85rem;
            background-color: var(--card-bg);
            padding: calc(var(--spacing-unit) * 1.6);
            border: 1px solid #ccc;
            border-radius: var(--border-radius-sm);
            max-height: 300px;
            overflow-y: auto;
        }
        #recommendationResultContainer h4 { /* Shared with generator */
            font-family: var(--font-sans-serif);
            font-size: 1.1rem;
            color: var(--primary-color-darker);
            margin-bottom: calc(var(--spacing-unit) * 0.8);
        }
         #recommendationResultContainer p, #recommendationResultContainer ul {
            font-family: var(--font-sans-serif);
            font-size: 0.95rem;
        }
        #recommendationResultContainer ul {
            list-style-position: inside; /* Ensures bullets are aligned well */
            padding-left: 0; /* Reset browser default */
        }
        #recommendationResultContainer li {
            margin-bottom: calc(var(--spacing-unit) * 0.5);
        }


        /* Footer */
        footer {
            text-align: center;
            padding: calc(var(--spacing-unit) * 2.4);
            background-color: var(--header-bg);
            color: #adb5bd; /* Lighter gray for footer text */
            font-size: 0.85rem;
            margin-top: auto; /* Pushes footer to bottom */
        }
        footer p { margin-bottom: var(--spacing-unit); } /* Add some space between paragraphs */
        footer p:last-child { margin-bottom: 0; }


        /* Accessibility */
        .sr-only { /* Screen Reader Only */
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        
        /* Responsive adjustments */
        @media (max-width: 860px) {
            header {
                flex-direction: column;
                padding: calc(var(--spacing-unit) * 2);
            }
            header h1 {
                margin-bottom: calc(var(--spacing-unit) * 1.6);
                font-size: 1.5rem;
            }
            nav ul {
                flex-direction: column;
                width: 100%;
            }
            nav ul li {
                width: 100%;
                text-align: center;
                margin-bottom: calc(var(--spacing-unit) * 0.4);
            }
            nav ul li a {
                margin-left: 0;
                display: block; /* Make links full width */
            }
        }
        @media (max-width: 600px) {
            main { padding: calc(var(--spacing-unit) * 1.6); }
            .dashboard-section { padding: calc(var(--spacing-unit) * 1.6); }
            .dashboard-section h2 { font-size: 1.3rem; }
            .dashboard-section h3 { font-size: 1.1rem; }
        }

    </style>
</head>
<body>
    <header>
        <h1>K-6 Behavior Data Dashboard</h1>
        <nav>
            <ul>
                <li><a href="#homepage" class="nav-link">Home</a></li>
                <li><a href="#defining-behaviors" class="nav-link">Defining Behaviors</a></li>
                <li><a href="#methods-overview" class="nav-link">Data Methods</a></li>
                <li><a href="#generator-tool" class="nav-link">Template Generator</a></li>
                <li><a href="#recommendation-tool" class="nav-link">Method Recommender</a></li>
                <li><a href="#best-practices" class="nav-link">Best Practices</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="homepage" class="dashboard-section" aria-hidden="true">
            <h2 tabindex="-1">Welcome to the Behavior Data Dashboard!</h2>
            <p>Effective behavior data collection is crucial in K-6 settings for understanding student needs, monitoring progress, and making informed decisions. This dashboard provides resources and tools to help teachers develop starting points for collecting behavior data within a Multi-Tiered System of Supports (MTSS) or Positive Behavioral Interventions and Supports (PBIS) framework.</p>
            
            <h3>Why Behavior Data?</h3>
            <div class="method-overview">
                <h4>Informed Decision-Making</h4>
                <p>Data enables educators to move beyond subjective impressions and make objective decisions about student support and interventions[cite: 68].</p>
            </div>
            <div class="method-overview">
                <h4>Monitoring Interventions</h4>
                <p>Systematic data collection allows for the evaluation of whether behavioral interventions are effective and leading to desired changes[cite: 68].</p>
            </div>
            <div class="method-overview">
                <h4>IEP Development & Tracking</h4>
                <p>For students in special education, detailed behavior data is essential for developing Functional Behavioral Assessments (FBAs), Behavior Intervention Plans (BIPs), and tracking progress towards Individualized Education Program (IEP) goals[cite: 69].</p>
            </div>
            <div class="method-overview">
                <h4>Identifying Trends</h4>
                <p>Data can reveal patterns in behavior at the individual, class-wide, or school-wide level, helping to identify when and where additional supports may be needed[cite: 68, 135].</p>
            </div>
        </section>

        <section id="defining-behaviors" class="dashboard-section" aria-hidden="true">
            <h2 tabindex="-1">Defining Target Behaviors Operationally</h2>
            <p>The foundation of effective behavior data collection is a clear, objective, and measurable definition of the target behavior[cite: 70]. This is known as an operational definition.</p>
            
            <div class="tutorial-step" data-target="opdef-step1" role="button" aria-expanded="false" aria-controls="opdef-step1-content">Why Operational Definitions Matter</div>
            <div id="opdef-step1-content" class="tutorial-content">
                <p>An operational definition ensures everyone observing the student is looking for and recording the same thing[cite: 70, 124]. It avoids vague terms (e.g., "disruptive," "aggressive") and describes the behavior in a way that is directly observable and measurable[cite: 70, 71]. This increases the reliability and consistency of your data[cite: 71, 126].</p>
                <p><em>Example:</em> Instead of "hyperactive," define as "student's hips move from being in contact with their assigned seat/area without permission during whole group instruction or independent work periods."</p>
            </div>

            <div class="tutorial-step" data-target="opdef-step2" role="button" aria-expanded="false" aria-controls="opdef-step2-content">Components of a Good Operational Definition</div>
            <div id="opdef-step2-content" class="tutorial-content">
                <ul>
                    <li><strong>Observable:</strong> The behavior can be seen or heard[cite: 70, 124].</li>
                    <li><strong>Measurable:</strong> The behavior can be counted (frequency, duration, etc.)[cite: 70, 124].</li>
                    <li><strong>Clear & Concise:</strong> Unambiguous and easy for anyone to understand[cite: 70, 126].</li>
                    <li><strong>Includes Examples & Non-Examples (Often):</strong> Clarifies what counts and what doesn't[cite: 125].
                        <ul>
                            <li><em>Example for "Off-Task":</em> "Student is not looking at instructional materials or not engaging in the assigned task for at least 5 consecutive seconds[cite: 125]." Includes: looking away from work for >5 seconds, playing with objects unrelated to the task. Excludes: brief glances away, or using approved fidgets quietly while still engaging with the task.</li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="tutorial-step" data-target="opdef-step3" role="button" aria-expanded="false" aria-controls="opdef-step3-content">Practice: Defining a Behavior</div>
            <div id="opdef-step3-content" class="tutorial-content">
                <p>Let's say you want to track "non-compliance." How would you define it operationally for a 2nd-grade student?</p>
                <p><em>Consider:</em> What does it look like? Sound like? When does it typically occur? What actions would *not* be counted?</p>
                <p><em>Possible Definition:</em> "Student verbally refuses (e.g., says 'No,' 'I won't') or physically fails to initiate a specific, teacher-given academic or behavioral direction within 10 seconds of the direction being clearly delivered to the student or group." (Adapted from [cite: 7, 30])</p>
            </div>
        </section>

        <section id="methods-overview" class="dashboard-section" aria-hidden="true">
            <h2 tabindex="-1">Key Behavior Data Collection Methods</h2>
            <p>Several methods can be used to collect behavior data, each with its strengths[cite: 82, 83]. Often, a combination of methods provides the most comprehensive picture[cite: 72, 201].</p>

            <div class="tutorial-step" data-target="method-frequency" role="button" aria-expanded="false" aria-controls="method-frequency-content">Frequency (Event) Recording</div>
            <div id="method-frequency-content" class="tutorial-content">
                <h4>What it is:</h4> <p>Counting how many times a specific, discrete behavior occurs within a defined observation period (e.g., number of call-outs during a 30-minute lesson)[cite: 84, 85].</p>
                <h4>Best for:</h4> <p>Behaviors that have a clear beginning and end and don't occur so frequently that counting is impossible (e.g., hitting, raising hand, task completion)[cite: 85, 89].</p>
                <h4>Tips:</h4> <ul><li>Define the behavior clearly[cite: 124].</li><li>Use simple tally marks, counters, or apps[cite: 87, 12].</li><li>Note the length of the observation period to calculate rate (e.g., occurrences per minute/hour)[cite: 86].</li></ul>
            </div>

            <div class="tutorial-step" data-target="method-duration" role="button" aria-expanded="false" aria-controls="method-duration-content">Duration Recording</div>
            <div id="method-duration-content" class="tutorial-content">
                <h4>What it is:</h4> <p>Measuring how long a behavior lasts from its onset to its end (e.g., length of a tantrum, time spent off-task)[cite: 14, 90].</p>
                <h4>Best for:</h4> <p>Behaviors where the length of time is the primary concern, or behaviors that are continuous or occur at very high rates[cite: 90, 92].</p>
                <h4>Tips:</h4> <ul><li>Requires a timing device (stopwatch, timer app)[cite: 15, 91].</li><li>Can calculate total duration (e.g., total minutes off-task in a period) or average duration per occurrence[cite: 16, 91].</li><li>Often useful to combine with frequency (e.g., 3 tantrums, average duration 5 minutes)[cite: 94].</li></ul>
            </div>
            
            <div class="tutorial-step" data-target="method-latency" role="button" aria-expanded="false" aria-controls="method-latency-content">Latency Recording</div>
            <div id="method-latency-content" class="tutorial-content">
                <h4>What it is:</h4> <p>Measuring the time that elapses between a specific cue or instruction (antecedent) and the beginning of the target behavior (e.g., time taken to start a task after being asked)[cite: 14, 18, 101].</p>
                <h4>Best for:</h4> <p>Assessing compliance, task initiation, or how quickly a behavior follows a trigger[cite: 103, 105].</p>
                <h4>Tips:</h4> <ul><li>Start timing when the cue is given and stop when the behavior begins[cite: 106].</li><li>Clearly define what constitutes the "start" of the behavior (e.g. pencil touches paper)[cite: 108].</li></ul>
            </div>

            <div class="tutorial-step" data-target="method-interval" role="button" aria-expanded="false" aria-controls="method-interval-content">Interval Recording & Time Sampling</div>
            <div id="method-interval-content" class="tutorial-content">
                <h4>What it is:</h4> <p>Dividing an observation period into short, equal intervals and recording whether the behavior occurred during (partial-interval), throughout (whole-interval), or at the exact moment the interval ends (momentary time sampling)[cite: 19, 95]. There are two main types: whole-interval (behavior occurred continuously for the entire interval) and partial-interval (behavior occurred at least once)[cite: 21, 96].</p>
                <h4>Best for:</h4> <p>Behaviors that occur at high frequencies or are continuous, making it hard to count every instance (e.g., on-task behavior, fidgeting, social interaction)[cite: 98, 100]. Provides an estimate of behavior.</p>
                <h4>Tips:</h4> <ul><li>Choose interval length appropriate for the behavior (e.g., 10-30 seconds)[cite: 95].</li><li>Partial-interval tends to overestimate behavior occurrence, while whole-interval can underestimate[cite: 21, 96].</li><li>Momentary time sampling is convenient but can miss behaviors that happen outside the exact moment[cite: 24, 99].</li><li>Often reported as a percentage of intervals in which behavior occurred[cite: 22, 97].</li></ul>
            </div>

            <div class="tutorial-step" data-target="method-abc" role="button" aria-expanded="false" aria-controls="method-abc-content">ABC Recording (Antecedent-Behavior-Consequence)</div>
            <div id="method-abc-content" class="tutorial-content">
                <h4>What it is:</h4> <p>A descriptive, narrative method where the observer records what happened immediately *before* the behavior (Antecedent), the behavior itself (objectively described), and what happened immediately *after* (Consequence)[cite: 27, 109].</p>
                <h4>Best for:</h4> <p>Understanding the context and potential function (purpose) of challenging behaviors, often used as part of a Functional Behavior Assessment (FBA)[cite: 109, 110].</p>
                <h4>Tips:</h4> <ul><li>Requires careful, objective observation and note-taking for each incident[cite: 114].</li><li>Collect data across multiple instances to identify patterns[cite: 112, 29].</li><li>Can be time-intensive but provides rich qualitative information[cite: 110, 113].</li></ul>
            </div>
        </section>


        <section id="generator-tool" class="dashboard-section data-form" aria-hidden="true">
            <h2 tabindex="-1">Behavior Data Template Generator</h2>
            <p>Create basic templates for behavior data collection. Select a template type and define your fields/elements. Remember to create a clear operational definition for any behavior you plan to track[cite: 189, 191].</p>
            <form id="templateGeneratorForm">
                <fieldset>
                    <legend>Template Setup</legend>
                    <div>
                        <label for="templateType">Select Template Type:</label>
                        <select id="templateType" name="templateType">
                            <option value="frequencyLog">Frequency Count Log</option>
                            <option value="durationLog">Duration Log</option>
                            <option value="abcChart">ABC Chart</option>
                            <option value="intervalSheet">Interval Recording Sheet</option>
                            <option value="latencyLog">Latency Log</option>
                        </select>
                    </div>
                </fieldset>
                
                <fieldset id="generatorOptionsContainerWrapper">
                     <legend>Template Details</legend>
                     <div id="generatorOptionsContainer">
                        </div>
                </fieldset>
                <button type="button" id="generateTemplateButton" class="button">Generate Template</button>
            </form>
            <div id="generatedTemplateOutputContainer" style="display:none;" aria-live="polite">
                <h3>Generated Template Preview (Copyable Text):</h3>
                <pre id="generatedTemplateOutput"></pre>
                <button type="button" id="copyTemplateButton" class="button secondary mt-1">Copy to Clipboard</button>
            </div>
        </section>

        <section id="recommendation-tool" class="dashboard-section data-form" aria-hidden="true">
            <h2 tabindex="-1">Behavior Data Method Recommender</h2>
            <p>Answer these questions about the behavior you want to track to get a suggested data collection method as a starting point. This tool helps select appropriate data collection methods based on behavior characteristics and observational context[cite: 192, 195].</p>
            <form id="recommendationForm">
                <div id="recommendationQuestionsContainer">
                    </div>
                <button type="button" id="getRecommendationButton" class="button mt-1" style="display:none;">Get Recommendation</button>
            </form>
            <div id="recommendationResultContainer" style="display:none;" aria-live="polite">
                <h4>Recommended Method(s):</h4>
                <p id="recommendedMethod"></p>
                <h4>Reasoning:</h4>
                <ul id="recommendationReasoning"></ul>
            </div>
        </section>

        <section id="best-practices" class="dashboard-section" aria-hidden="true">
            <h2 tabindex="-1">Best Practices for Reliable & Ethical Data Collection</h2>
            <p>Ensuring high-quality data collection is essential for its utility[cite: 122, 123].</p>
            <div class="best-practice-item">
                <h4>Use Clear Operational Definitions</h4>
                <p>Always define behaviors in specific, observable, and measurable terms before starting[cite: 70, 124]. Ensure all observers use the same definition[cite: 124]. For example, "off-task" might be defined as "not looking at instructional materials or not engaging in the assigned task for at least 5 consecutive seconds[cite: 125]."</p>
            </div>
            <div class="best-practice-item">
                <h4>Train Observers</h4>
                <p>Anyone collecting data should be trained on the definitions and methods[cite: 126]. Conduct interobserver reliability (IOR) checks periodically if multiple observers are involved to ensure consistency[cite: 127, 128].</p>
            </div>
            <div class="best-practice-item">
                <h4>Be Objective and Minimize Bias</h4>
                <p>Record factual observations (e.g., "Johnny stood up and walked around the room")[cite: 130]. Avoid subjective interpretations or labels ("Johnny was being defiant")[cite: 130]. Using structured data sheets can help[cite: 131].</p>
            </div>
            <div class="best-practice-item">
                <h4>Collect Data Consistently</h4>
                <p>Use the same methods and definitions over time, especially when comparing baseline data to intervention data[cite: 129]. Determine appropriate frequency of data collection based on need and feasibility, balancing data needs with classroom demands[cite: 133, 137].</p>
            </div>
            <div class="best-practice-item">
                <h4>Ensure Ethical Use and Privacy</h4>
                <p>Treat behavior data as confidential student information[cite: 138]. Store it securely and share it only with authorized personnel for the purpose of supporting the student[cite: 140]. Obtain parental consent if data collection goes beyond routine classroom practice[cite: 141].</p>
            </div>
            <div class="best-practice-item">
                <h4>Focus on Positive Behaviors Too</h4>
                <p>Track improvements and desired behaviors, not just challenging ones[cite: 132, 143]. This provides a balanced view and helps in reinforcing progress[cite: 144].</p>
            </div>
            <div class="best-practice-item">
                <h4>Use Data to Inform Action</h4>
                <p>Regularly review collected data to make decisions about interventions, supports, and strategies[cite: 221]. Data is a tool for positive change and should guide teaching and reinforcement[cite: 146, 225].</p>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; <span id="currentYear"></span> Behavior Data Dashboard Tools. All rights reserved for original content, design, and tools on this site.</p>
        <p>The information and tools provided are for educational and starting-point purposes only to assist teachers. These tools do not constitute behavioral consultation or assessment. Always consult with qualified school personnel (e.g., school psychologist, behavior specialist, special education staff) or a Board Certified Behavior Analyst (BCBA) for individual student assessment, intervention planning, and professional advice.</p>
    </footer>

<script>
    // --- Configuration for Generator Options ---
    const generatorFieldConfigurations = {
        frequencyLog: () => `
            <label for="freqBehaviors">Behaviors to Track (comma-separated):</label>
            <input type="text" id="freqBehaviors" name="freqBehaviors" placeholder="e.g., Call out, On-task comment, Hit" required>
            <label for="freqObservationPeriod">Observation Period Length (e.g., 30 minutes, 1 class period):</label>
            <input type="text" id="freqObservationPeriod" name="freqObservationPeriod" placeholder="e.g., 30 minutes reading group">
            <label for="freqOperationalDef">Operational Definition Placeholder (will be included in template):</label>
            <textarea id="freqOperationalDef" name="freqOperationalDef" rows="3" placeholder="Example: Call Out - Any vocalization made by the student, not directed to the teacher during instruction, that is audible to others and not a direct response to a question."></textarea>
        `,
        durationLog: () => `
            <label for="durBehavior">Behavior for Duration Recording:</label>
            <input type="text" id="durBehavior" name="durBehavior" placeholder="e.g., Off-task, Tantrum" required>
            <label for="durOperationalDef">Operational Definition (describe the behavior clearly):</label>
            <textarea id="durOperationalDef" name="durOperationalDef" rows="3" placeholder="Example: Off-Task - Student's eyes are directed away from assigned work, materials, or speaker for more than 5 consecutive seconds."></textarea>
        `,
        abcChart: () => `
            <label for="abcTargetBehavior">Optional: Target Behavior(s) for ABC Chart Focus:</label>
            <input type="text" id="abcTargetBehavior" name="abcTargetBehavior" placeholder="e.g., Physical aggression, Elopement">
            <p class="mb-1" style="font-size: 0.85em; color: var(--text-soft-color);">The ABC chart is used to identify patterns by recording what happens before (Antecedent), the Behavior itself, and what happens after (Consequence)[cite: 27, 109].</p>
        `,
        intervalSheet: () => `
            <label for="intervalBehavior">Behavior for Interval Recording:</label>
            <input type="text" id="intervalBehavior" name="intervalBehavior" placeholder="e.g., On-task, Fidgeting" required>
            <label for="intervalOperationalDef">Operational Definition:</label>
            <textarea id="intervalOperationalDef" name="intervalOperationalDef" rows="3" placeholder="Example: On-Task - Student is oriented towards the task/speaker, actively working, or using materials as directed."></textarea>
            <label for="intervalLength">Interval Length (e.g., 10 seconds, 1 minute):</label>
            <input type="text" id="intervalLength" name="intervalLength" placeholder="e.g., 30 seconds">
            <label for="totalObservationTime">Total Observation Time (e.g., 20 minutes):</label>
            <input type="text" id="totalObservationTime" name="totalObservationTime" placeholder="e.g., 20 minutes">
            <label for="intervalType">Interval Type:</label>
            <select id="intervalType" name="intervalType">
                <option value="partial">Partial Interval (occurs at any time during interval)</option>
                <option value="whole">Whole Interval (occurs for the entire interval)</option>
                <option value="momentary">Momentary Time Sampling (occurs at the moment interval ends)</option>
            </select>
        `,
        latencyLog: () => `
            <label for="latBehavior">Behavior for Latency Recording:</label>
            <input type="text" id="latBehavior" name="latBehavior" placeholder="e.g., Starting task after instruction" required>
            <label for="latOperationalDef">Operational Definition (define the *start* of the behavior):</label>
            <textarea id="latOperationalDef" name="latOperationalDef" rows="3" placeholder="Example: Starting Task - Student picks up pencil and places it on the worksheet within the designated area."></textarea>
            <label for="latAntecedent">Antecedent/Prompt (that should initiate the behavior):</label>
            <input type="text" id="latAntecedent" name="latAntecedent" placeholder="e.g., 'Please begin your math worksheet.'">
        `
    };

    // --- Configuration for Recommender Questions ---
    const behaviorRecQuestionsConfig = [
        {
            id: "behaviorNature",
            text: "1. How would you describe the behavior's typical occurrence?",
            options: [
                { value: "", text: "-- Select --" },
                { value: "discrete", text: "Discrete & Countable (clear start/end, happens as distinct units)" },
                { value: "continuous", text: "Continuous or Very High Rate (hard to count each instance, occurs for extended periods)" },
                { value: "responseLag", text: "Primarily concerned with delay in starting a task/response after a prompt" }
            ]
        },
        {
            id: "infoNeeded",
            text: "2. What primary information do you need about the behavior?",
            options: [
                { value: "", text: "-- Select --" },
                { value: "howOften", text: "How often it occurs (count/rate)" },
                { value: "howLong", text: "How long it lasts (duration per instance or total)" },
                { value: "whenAndWhy", text: "When and why it happens (context, triggers, consequences)" },
                { value: "proportionOfTime", text: "Rough proportion of time it occurs (estimate of engagement/disengagement)" }
            ]
        },
        {
            id: "observerAvailability",
            text: "3. What is the observer's availability for direct observation?",
            options: [
                { value: "", text: "-- Select --" },
                { value: "continuousDedicated", text: "Can observe continuously for a dedicated period" },
                { value: "intermittentMultitasking", text: "Can only observe intermittently or at specific moments while also teaching/multitasking" }
            ]
        }
    ];

    // --- Utility Functions ---
    function showSection(sectionId) {
        document.querySelectorAll('.dashboard-section').forEach(section => {
            const isActive = section.id === sectionId;
            // section.classList.toggle('active-section', isActive); // 'active-section' can be used for animation trigger if needed
            section.setAttribute('aria-hidden', String(!isActive));
        });

        const activeSection = document.getElementById(sectionId);
        if (activeSection) {
            // No need to re-add active-section if aria-hidden CSS handles display
            // activeSection.classList.add('active-section'); 
            const mainHeading = activeSection.querySelector('h2');
            if (mainHeading) {
                mainHeading.focus();
            } else {
                 activeSection.setAttribute('tabindex', '-1'); // Should already be there from HTML
                 activeSection.focus();
            }
        }
        window.scrollTo(0,0);
    }

    function convertToSeconds(timeStr) {
        if (!timeStr || typeof timeStr !== 'string') return 0;
        const timeStrLower = timeStr.toLowerCase();
        const value = parseInt(timeStrLower);
        if (isNaN(value)) return 0;
        if (timeStrLower.includes("min")) return value * 60;
        if (timeStrLower.includes("sec")) return value;
        if (timeStrLower.includes("hr") || timeStrLower.includes("hour")) return value * 3600;
        return value; // Assume seconds if no unit
    }


    document.addEventListener('DOMContentLoaded', () => {
        const navLinks = document.querySelectorAll('.nav-link');
        
        // --- Navigation Click Handling ---
        navLinks.forEach(link => {
            link.addEventListener('click', (event) => {
                event.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                showSection(targetId);

                navLinks.forEach(nav => nav.classList.remove('active-nav'));
                event.currentTarget.classList.add('active-nav');
            });
        });

        // --- Initial Page Load Section Setup ---
        let initialSectionId = window.location.hash ? window.location.hash.substring(1) : 'homepage';
        if (!document.getElementById(initialSectionId)) {
            initialSectionId = 'homepage'; // Fallback if hash is invalid
        }

        document.querySelectorAll('.dashboard-section').forEach(section => {
            if (section.id === initialSectionId) {
                section.setAttribute('aria-hidden', 'false');
                // section.classList.add('active-section'); // For animation, if CSS is set up for it
            } else {
                section.setAttribute('aria-hidden', 'true');
                // section.classList.remove('active-section');
            }
        });
        navLinks.forEach(link => {
            if (link.getAttribute('href') === `#${initialSectionId}`) {
                link.classList.add('active-nav');
            } else {
                link.classList.remove('active-nav');
            }
        });
        const activeInitialSection = document.getElementById(initialSectionId);
        if (activeInitialSection) {
            const mainHeading = activeInitialSection.querySelector('h2');
            if (mainHeading) {
                mainHeading.focus();
            } else {
                 activeInitialSection.setAttribute('tabindex', '-1'); // Should already be there
                 activeInitialSection.focus();
            }
        }


        // --- Interactive Tutorial Logic ---
        document.querySelectorAll('.tutorial-step').forEach(step => {
            step.addEventListener('click', () => {
                const targetId = step.dataset.target;
                const content = document.getElementById(targetId + '-content');
                if (content) {
                    const isVisible = content.classList.toggle('visible');
                    step.setAttribute('aria-expanded', String(isVisible));
                }
            });
            // tabindex="0" is already set in HTML
            step.addEventListener('keydown', (event) => {
                if (event.key === 'Enter' || event.key === ' ') {
                    event.preventDefault(); 
                    step.click();
                }
            });
        });

        // --- Template Generator Logic ---
        const templateTypeSelect = document.getElementById('templateType');
        const generatorOptionsContainer = document.getElementById('generatorOptionsContainer');
        const generateTemplateButton = document.getElementById('generateTemplateButton');
        const generatedTemplateOutput = document.getElementById('generatedTemplateOutput');
        const generatedTemplateOutputContainer = document.getElementById('generatedTemplateOutputContainer');
        const copyTemplateButton = document.getElementById('copyTemplateButton');

        function updateGeneratorOptions() {
            if (!generatorOptionsContainer || !templateTypeSelect) return;
            const type = templateTypeSelect.value;
            if (generatorFieldConfigurations[type]) {
                generatorOptionsContainer.innerHTML = generatorFieldConfigurations[type]();
            } else {
                generatorOptionsContainer.innerHTML = '<p>Select a template type to see options.</p>';
            }
        }
        
        if (templateTypeSelect) {
            templateTypeSelect.addEventListener('change', updateGeneratorOptions);
            updateGeneratorOptions(); // Initial call
        }

        if (generateTemplateButton) {
            generateTemplateButton.addEventListener('click', () => {
                const form = document.getElementById('templateGeneratorForm');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }

                const type = templateTypeSelect.value;
                let output = `Data Collection Template: ${type.replace(/([A-Z])/g, ' $1').trim()}\n\n`;
                output += `Student: _________________________ Date: ______________ Observer: ______________\n`;
                output += `Setting: _________________________ Time Start: _________ Time End: __________\n\n`;
                
                let operationalDefText = "";
                const opDefInputId = type.startsWith('freq') ? 'freqOperationalDef' : 
                                     type.startsWith('dur') ? 'durOperationalDef' :
                                     type.startsWith('interval') ? 'intervalOperationalDef' :
                                     type.startsWith('lat') ? 'latOperationalDef' : null;

                if (opDefInputId && document.getElementById(opDefInputId)) {
                    operationalDefText = document.getElementById(opDefInputId).value.trim();
                }

                const mainBehaviorInput = document.getElementById('freqBehaviors') || document.getElementById('durBehavior') || document.getElementById('intervalBehavior') || document.getElementById('latBehavior') || document.getElementById('abcTargetBehavior');
                const mainBehaviorName = mainBehaviorInput ? mainBehaviorInput.value.trim() : "Target Behavior";

                if (type !== 'abcChart' || (type === 'abcChart' && mainBehaviorName && mainBehaviorName !== "Target Behavior")) {
                     output += `Target Behavior(s): ${mainBehaviorName || "Not Specified"}\n`;
                }
                
                if (operationalDefText) {
                    output += `Operational Definition:\n${operationalDefText}\n________________________________________________________________________________\n\n`;
                } else if (type !== 'abcChart') {
                    output += `Operational Definition: [Remember to define the behavior(s) in clear, observable, and measurable terms. E.g., For 'Hitting': Any instance of the student's hand/fist making forceful contact with another person's body.]\n________________________________________________________________________________\n\n`;
                }


                switch (type) {
                    case 'frequencyLog':
                        const behaviors = (document.getElementById('freqBehaviors')?.value || 'Behavior 1').split(',').map(b => b.trim());
                        const obsPeriod = document.getElementById('freqObservationPeriod')?.value || 'N/A';
                        output += `Observation Period: ${obsPeriod}\n\n`;
                        output += `| Behavior Tracked          | Tallies                               | Total |\n`;
                        output += `|---------------------------|---------------------------------------|-------|\n`;
                        behaviors.forEach(b => {
                            output += `| ${b.padEnd(25)} |                                       |       |\n`;
                        });
                        output += `\nNotes/Context:\n`;
                        break;
                    case 'durationLog':
                        output += `| Start Time | End Time   | Duration   | Notes/Context (What was happening?) |\n`;
                        output += `|------------|------------|------------|-------------------------------------|\n`;
                        for(let i=0; i<5; i++) output += `|            |            |            |                                     |\n`;
                        output += `\nTotal Duration: _____________\nAverage Duration: ____________`;
                        break;
                    case 'abcChart':
                        output += `Instructions: For each observed instance of the target behavior(s), describe what happened just before (Antecedent), the Behavior itself, and what happened right after (Consequence)[cite: 27, 109].\n\n`
                        output += `| Date/Time | Setting/Activity | Antecedent (What happened BEFORE?)                     | Behavior (What did student DO - be specific) | Consequence (What happened AFTER? How did others react?) |\n`;
                        output += `|-----------|------------------|--------------------------------------------------------|----------------------------------------------|----------------------------------------------------------|\n`;
                        for(let i=0; i<5; i++) output += `|           |                  |                                                        |                                              |                                                          |\n`;
                        output += `\nPossible Function/Purpose Hypothesis (Why do you think the behavior is occurring? e.g., to get attention, escape task, get item):\n`;
                        break;
                    case 'intervalSheet':
                        const intervalLength = document.getElementById('intervalLength')?.value || '30 sec';
                        const totalTime = document.getElementById('totalObservationTime')?.value || '10 min';
                        const intervalTypeVal = document.getElementById('intervalType')?.value || 'partial';
                        output += `Interval Type: ${intervalTypeVal.charAt(0).toUpperCase() + intervalTypeVal.slice(1)} Interval Recording\nInterval Length: ${intervalLength}\nTotal Observation Time: ${totalTime}\n\n`;
                        output += `Key: [+] = Behavior Occurred, [-] = Behavior Did Not Occur (according to ${intervalTypeVal} definition)\n\n`;
                        output += `| Interval # | Time  | (+/-) | Notes (Optional: Antecedents, Consequences for key intervals) |\n`;
                        output += `|------------|-------|-------|---------------------------------------------------------------|\n`;
                        let numIntervals = 10; 
                        try {
                            const totalSeconds = convertToSeconds(totalTime);
                            const intervalSecondsValNum = convertToSeconds(intervalLength);
                            if (totalSeconds > 0 && intervalSecondsValNum > 0) {
                                numIntervals = Math.floor(totalSeconds / intervalSecondsValNum);
                            }
                        } catch (e) { /* Use default */ }

                        for (let k = 1; k <= Math.max(1, numIntervals) ; k++) {
                            output += `| ${String(k).padEnd(10)} |       |       |                                                               |\n`;
                        }
                        output += `\nTotal Intervals with Behavior: ______\nPercentage of Intervals with Behavior: ______ % (Total with Behavior / Total Intervals * 100)\n`;
                        break;
                    case 'latencyLog':
                        const antecedent = document.getElementById('latAntecedent')?.value || 'Instruction given';
                        output += `Antecedent/Prompt: ${antecedent}\n\n`;
                        output += `| Time of Prompt | Time Behavior Began | Latency (Time Elapsed) | Notes (Context, what did student do during latency) |\n`;
                        output += `|----------------|---------------------|------------------------|-----------------------------------------------------|\n`;
                        for(let i=0; i<5; i++) output += `|                |                     |                        |                                                     |\n`;
                        output += `\nAverage Latency: ____________`;
                        break;
                }
                generatedTemplateOutput.textContent = output;
                generatedTemplateOutputContainer.style.display = 'block';
            });
        }

        if (copyTemplateButton) {
            copyTemplateButton.addEventListener('click', () => {
                if (navigator.clipboard && generatedTemplateOutput.textContent) {
                    navigator.clipboard.writeText(generatedTemplateOutput.textContent)
                        .then(() => alert('Template copied to clipboard!'))
                        .catch(err => {
                            console.error('Failed to copy: ', err);
                            alert('Failed to copy. Your browser might not support this feature or permissions may be denied.');
                        });
                } else { 
                    alert('Clipboard API not available or no template to copy.'); 
                }
            });
        }

        // --- Recommendation Tool Logic ---
        const recQuestionsContainer = document.getElementById('recommendationQuestionsContainer');
        const getRecButton = document.getElementById('getRecommendationButton');
        const recResultDiv = document.getElementById('recommendationResultContainer');
        const recMethodP = document.getElementById('recommendedMethod');
        const recReasoningUl = document.getElementById('recommendationReasoning');

        let currentRecQuestionIndex = 0;
        const userRecAnswers = {};

        function displayRecQuestion(index) {
            if (!recQuestionsContainer) return;
            
            if (index < behaviorRecQuestionsConfig.length) {
                const qConfig = behaviorRecQuestionsConfig[index];
                
                let qGroup = document.getElementById(`q-group-${qConfig.id}`);
                if (!qGroup) { // Only create if it doesn't exist
                    qGroup = document.createElement('fieldset');
                    qGroup.id = `q-group-${qConfig.id}`;
                    qGroup.className = 'mb-2';

                    const legend = document.createElement('legend');
                    legend.textContent = qConfig.text;
                    qGroup.appendChild(legend);

                    const selectEl = document.createElement('select');
                    selectEl.id = qConfig.id;
                    selectEl.name = qConfig.id;
                    qConfig.options.forEach(opt => {
                        const optionEl = document.createElement('option');
                        optionEl.value = opt.value;
                        optionEl.textContent = opt.text;
                        selectEl.appendChild(optionEl);
                    });
                    
                    qGroup.appendChild(selectEl);
                    recQuestionsContainer.appendChild(qGroup);

                    selectEl.addEventListener('change', (event) => {
                        userRecAnswers[qConfig.id] = event.target.value;
                        
                        // Determine if we should show the next question or the button
                        let allPreviousAnswered = true;
                        for(let i = 0; i <= index; i++) {
                            if(!userRecAnswers[behaviorRecQuestionsConfig[i].id] || userRecAnswers[behaviorRecQuestionsConfig[i].id] === "") {
                                allPreviousAnswered = false;
                                break;
                            }
                        }

                        if (allPreviousAnswered && index + 1 < behaviorRecQuestionsConfig.length) {
                            displayRecQuestion(index + 1); // Display next question
                        }
                        
                        // Check if all questions are answered to show button
                        const allAnswered = behaviorRecQuestionsConfig.every(q => userRecAnswers[q.id] && userRecAnswers[q.id] !== "");
                        if (allAnswered && getRecButton) {
                            getRecButton.style.display = 'inline-block';
                        } else if (getRecButton) {
                             getRecButton.style.display = 'none';
                        }
                    });
                }
                // Hide button if not all questions are answered yet
                const allAnswered = behaviorRecQuestionsConfig.every(q => userRecAnswers[q.id] && userRecAnswers[q.id] !== "");
                if (!allAnswered && getRecButton) {
                    getRecButton.style.display = 'none';
                }

            }
        }
        
        if (getRecButton) {
            getRecButton.addEventListener('click', () => {
                let recommendations = new Set();
                let reasoningPoints = [];

                const { behaviorNature, infoNeeded, observerAvailability } = userRecAnswers;

                if (!behaviorNature || !infoNeeded || !observerAvailability || behaviorNature === "" || infoNeeded === "" || observerAvailability === "") {
                    alert("Please answer all questions to get a recommendation.");
                    return;
                }

                if (infoNeeded === 'whenAndWhy') {
                    recommendations.add("ABC Recording");
                    reasoningPoints.push("To understand the context, potential triggers (Antecedents), and outcomes (Consequences) which helps hypothesize the function of the behavior, ABC Recording is the primary method[cite: 109, 110].");
                }

                if (behaviorNature === 'responseLag') {
                    recommendations.add("Latency Recording");
                    reasoningPoints.push("When the main concern is the time delay between a prompt/instruction and the start of the behavior, Latency Recording directly measures this[cite: 101, 105].");
                }

                if (behaviorNature === 'discrete') {
                    if (infoNeeded === 'howOften') {
                        recommendations.add("Frequency (Event) Recording");
                        reasoningPoints.push("For behaviors with a clear start and end, Frequency Recording counts how many times it occurs, which is ideal for tracking increases or decreases[cite: 85, 89].");
                    }
                    if (infoNeeded === 'howLong' && !recommendations.has("Duration Recording")) { 
                        recommendations.add("Duration Recording");
                        reasoningPoints.push("If the length of each discrete instance is important (e.g., short vs. long episodes of a specific action), use Duration Recording[cite: 90].");
                    }
                }
                
                if (behaviorNature === 'continuous' || (behaviorNature === 'discrete' && infoNeeded === 'proportionOfTime')) { 
                    if (infoNeeded === 'howLong' || infoNeeded === 'proportionOfTime') {
                        if (!recommendations.has("Duration Recording")) { 
                             recommendations.add("Duration Recording");
                             reasoningPoints.push("For continuous behaviors, or when the total time spent in a behavior is key, Duration Recording is suitable[cite: 90, 92].");
                        }
                    }
                    if (infoNeeded === 'proportionOfTime' || observerAvailability === 'intermittentMultitasking' || behaviorNature === 'continuous') {
                        recommendations.add("Interval Recording (Partial or Whole)");
                        recommendations.add("Momentary Time Sampling");
                        reasoningPoints.push("For ongoing behaviors, or if continuous observation is difficult, Interval Recording or Momentary Time Sampling can provide an estimate of how often or what proportion of time the behavior occurs[cite: 98, 100]. MTS is often easier for teachers managing a class[cite: 99, 25].");
                    }
                }
                
                if (recommendations.size === 0) { 
                     recommendations.add("Direct Observation with Anecdotal Notes");
                     reasoningPoints.push("If the behavior is complex or the best measurement isn't immediately clear, start with detailed narrative (anecdotal) notes during direct observation. This can help clarify the behavior's characteristics and guide the selection of a more specific data collection method later.");
                }
                
                if (recommendations.has("Frequency (Event) Recording") && recommendations.has("Duration Recording") && recommendations.size <= 3) { // Check size to avoid too many "combined" messages
                    reasoningPoints.push("Often, combining Frequency and Duration Recording gives a more complete picture (e.g., how many times a behavior occurred and how long each instance lasted)[cite: 94, 201].");
                }
                if (recommendations.has("ABC Recording") && recommendations.size > 1 && recommendations.size <=3 ) {
                    reasoningPoints.push("ABC data can be supplemented with quantitative measures (like Frequency or Duration) to provide both contextual understanding and measurable change over time[cite: 121].");
                }


                recMethodP.textContent = recommendations.size > 0 ? Array.from(recommendations).join('; or ') : "Could not determine a primary recommendation. Consider direct observation and anecdotal notes first.";
                
                recReasoningUl.innerHTML = ''; 
                reasoningPoints.forEach(point => {
                    const li = document.createElement('li');
                    li.innerHTML = point.replace(/\/g, '<span style="font-style:italic; color: #555;"></span>');
                    recReasoningUl.appendChild(li);
                });

                recResultDiv.style.display = 'block';
            });
        }

        if (recQuestionsContainer) displayRecQuestion(currentRecQuestionIndex); // Initial call for the first question

        const currentYearSpan = document.getElementById('currentYear');
        if (currentYearSpan) currentYearSpan.textContent = new Date().getFullYear();
    });
</script>
</body>
</html>
